
# 儲存類別關鍵字

| 關鍵字        | 儲存區域                | 預設值     | 生命週期       | 存取速度 | 使用情境          |
| ---------- | ------------------- | ------- | ---------- | ---- | ------------- |
| `auto`     | stack（預設）           | 未定義     | 區塊內有效（函式內） | 一般   | 預設情況（可省略）     |
| `register` | CPU 暫存器建議區          | 未定義     | 區塊內有效      | 快速   | 存取頻繁變數（可能被忽略） |
| `static`   | 靜態儲存區（data segment） | 0       | 整個程式執行期間   | 一般   | 保留區域內變數值不變    |
| `extern`   | 全域記憶體               | 由其他檔案決定 | 整個程式執行期間   | 一般   | 宣告外部變數（定義在別處） |

> [!NOTE] 儲存類別與生命週期
>  auto / register → 區域變數（區塊內、執行結束就消失）
>  static           → 區域變數但生命週期變長（整程式）
>   extern           → 全域變數，在其他檔案定義
>  
>  

1. `auto`（自動）
	- 預設就是 `auto`，可以省略。
	- 作用範圍只在目前的區塊（例如函式內）。
	- C++裡，如果是複雜格式的宣告，不可以省略auto
- `register`（暫存器建議）
	- **建議**編譯器把變數放在 CPU 暫存器中，加快存取。
	- **不能取得位址**（不能對它用 `&counter`）。(暫存器沒有記憶體地址)
	- 編譯器可能忽略你的要求。
	- 無論是否真的使用暫存器，**一旦你寫了 `register`，你就不能對變數取址**
- `static`（靜態儲存）
	- 區域變數記憶體不會釋放
	- **`static` 在 C 語言中有「兩層功能」：**
		1. **控制儲存區域（Storage Duration）** → 控制變數的生命週期
		2. **控制可見範圍（Linkage / Access Scope）** → 限定變數或函式是否能被其他檔案存取
- `extern`（外部連結）


# 儲存類別與記憶體空間觀聯

|關鍵字|記憶體區段|控制的內容|範例|
|---|---|---|---|
|`auto`|Stack（堆疊區）|預設區域變數（可省略）|`auto int x = 10;` → 放在 stack|
|`register`|CPU 暫存器（建議）|儘量放在暫存器，不能取地址|`register int r = 0;`|
|`static`|Data / BSS（靜態區）|壽命延長到整個程式執行期間|`static int count = 0;`|
|`extern`|不分區段（僅宣告）|使用其他檔案的全域變數|`extern int globalVar;`|
|(無修飾詞)|視宣告位置決定|預設為 `auto` 或 global scope|`int x = 3;` 在函式外→ global/data區|